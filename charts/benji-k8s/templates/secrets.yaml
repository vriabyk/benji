{{- if .Values.benji.configurationFromSecrets.createSecret }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.benji.configurationFromSecrets.secretsName }}
  labels:
{{ include "benji.labels" . | indent 4 }}
type: Opaque
data: 
  configuration: |
    configurationVersion: '1'
    databaseEngine: sqlite:////tmp/benji.sqlite
    defaultStorage: storage-1
    storages:
      - name: storage-1
        storageId: 1
        module: s3
        configuration:
          awsAccessKeyId: admin
          awsSecretAccessKey: admin
          useSsl: true
          endpointUrl: https://s3-compatible-endpoint/
          bucketName: benji
          disableEncodingType: true
{{- end }}
{{- if .Values.ceph.createSecret }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.ceph.key }}
  labels:
{{ include "benji.labels" . | indent 4 }}
type: Opaque
data:
  keyring: |
{{ include "benji.ceph-keyring" . | b64enc | indent 4 }}
{{- end }}
